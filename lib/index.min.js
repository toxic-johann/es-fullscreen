!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).esFullscreen={})}(this,function(e){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t,n=(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=o=function(e){return n(e)}:t.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},o(e)}t.exports=o}(t={exports:{}},t.exports),t.exports),r="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,c=(r||l||Function("return this")()).Symbol,u=Object.prototype,i=u.hasOwnProperty,f=u.toString,a=c?c.toStringTag:void 0;var y=Object.prototype.toString;var d="[object Null]",v="[object Undefined]",b=c?c.toStringTag:void 0;function m(e){return null==e?void 0===e?v:d:b&&b in Object(e)?function(e){var t=i.call(e,a),n=e[a];try{var o=!(e[a]=void 0)}catch(e){}var r=f.call(e);return o&&(t?e[a]=n:delete e[a]),r}(e):function(e){return y.call(e)}(e)}var p="[object AsyncFunction]",h="[object Function]",g="[object GeneratorFunction]",E="[object Proxy]";function j(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=m(e);return t==h||t==g||t==p||t==E}var S="object"==typeof e&&e&&!e.nodeType&&e,w=S&&"object"==typeof module&&module&&!module.nodeType&&module,O=w&&w.exports===S&&r.process,F=function(){try{var e=w&&w.require&&w.require("util").types;return e||O&&O.binding&&O.binding("util")}catch(e){}}();Function.prototype.toString.call(Object),F&&F.isDate,F&&F.isRegExp;"undefined"!=typeof window&&Object.prototype.toString.call(window);function k(e){return!function(e){return void 0===e}(e)}function _(e){return!!("object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?e instanceof HTMLElement:e&&"object"===n(e)&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)}var x=["","o","ms","moz","webkit","webkitCurrent"],T=[["",""],["exit","cancel"],["screen","Screen"]],L={bottom:0,height:"100%",left:0,overflow:"hidden",position:"fixed",right:0,top:0,width:"100%",zIndex:"2147483647"},M=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],N=["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"],P="object"==typeof global&&global&&global.Object===Object&&global,U="object"==typeof self&&self&&self.Object===Object&&self,z=(P||U||Function("return this")()).Symbol,H=Object.prototype,K=H.hasOwnProperty,q=H.toString,A=z?z.toStringTag:void 0;var C=Object.prototype.toString;var D="[object Null]",G="[object Undefined]",I=z?z.toStringTag:void 0;function R(e){return null==e?void 0===e?G:D:I&&I in Object(e)?function(e){var t=K.call(e,A),n=e[A];try{var o=!(e[A]=void 0)}catch(e){}var r=q.call(e);return o&&(t?e[A]=n:delete e[A]),r}(e):function(e){return C.call(e)}(e)}function V(e){return null!=e&&"object"==typeof e}var W=Array.isArray;var Y,B,J=(Y=Object.getPrototypeOf,B=Object,function(e){return Y(B(e))}),Q="[object Object]",X=Function.prototype,Z=Object.prototype,$=X.toString,ee=Z.hasOwnProperty,te=$.call(Object);var ne="[object String]";function oe(e){return"string"==typeof e||!W(e)&&V(e)&&R(e)==ne}var re="undefined"!=typeof document;function le(e,t,n){if(oe(t))e.style[t]=n;else for(var o in t)le(e,o,t[o])}function ce(e,t,n){var o=2<arguments.length&&void 0!==n?n:{};t&&!oe(t)&&(o=t),oe(e)&&(t=e);var r=o.keyOnly,l=void 0!==r&&r;if(!re)return l?"":void 0;if(_(e)||(e=document),!oe(t))throw new Error("You must pass in a string as name, but not ".concat(s(t),"."));for(var c=0;c<T.length;c++){t=t.replace(T[c][0],T[c][1]);for(var u=0;u<x.length;u++){var i=0===u?t:x[u]+t.charAt(0).toUpperCase()+t.substr(1);if(void 0!==e[i])return l?i:e[i]}}return l?"":void 0}function ue(e,t,n){var o,r=2<arguments.length&&void 0!==n?n:{},l=r.bubbles,c=void 0===l||l,u=r.cancelable,i=void 0===u||u;if(j(Event)?o=new Event(t,{bubbles:c,cancelable:i}):re&&document.createEvent?(o=document.createEvent("HTMLEvents")).initEvent(t,!0,!0):re&&document.createEventObject&&((o=document.createEventObject()).eventType=t,o.eventName=t),!function(e){if(!V(e)||R(e)!=Q)return!1;var t=J(e);if(null===t)return!0;var n=ee.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&$.call(n)==te}(o)&&!function(e){return e instanceof Event||(e&&e.originalEvent)instanceof Event}(o))throw new Error("We can't create an object on this browser, please report to author");e.dispatchEvent?e.dispatchEvent(o):e.fireEvent?e.fireEvent("on"+o.eventType,o):e[t]?e[t]():e["on"+t]&&e["on"+t]()}var ie=ce("fullscreenEnabled"),se=!1,fe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fullscreenElement=null,this.isNativelySupport=k(ce("fullscreenElement"))&&(!k(ie)||!0===ie),this._openKey=re?ce(document.body||document.documentElement,"requestFullscreen",{keyOnly:!0}):"",this._exitKey=ce("exitFullscreen",{keyOnly:!0}),this._useStyleFirst=!1,this.hasUsedStyle=!1}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"requestFullscreen",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{force:!1};return this.open(e,n)}},{key:"open",value:function(n,e){var t=(1<arguments.length&&void 0!==e?e:{}).force,o=void 0!==t&&t,r=this.fullscreenElement;if(r&&r!==n){if(!o)return ue(document,"fullscreenerror"),!1;this.exit()}if(!this.useStyleFirst){if(this.isNativelySupport)return j(n[this._openKey])&&n[this._openKey](),!0;if(n instanceof HTMLVideoElement&&n.webkitSupportsFullscreen&&j(n.webkitEnterFullscreen))return n.webkitEnterFullscreen(),this._fullscreenElement=n,!0}return this._savedStyles=Object.keys(L).reduce(function(e,t){return e[t]=n.style[t],e},{}),le(n,L),document.body&&(this._bodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden"),document.documentElement&&(this._htmlOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden"),this._fullscreenElement=n,this.hasUsedStyle=!0,ue(n,"fullscreenchange"),!0}},{key:"exitFullscreen",value:function(){return this.exit()}},{key:"exit",value:function(){if(!this.isFullscreen)return!1;if(this.isNativelySupport&&!this.useStyleFirst&&!this.hasUsedStyle)return document[this._exitKey](),!0;var e=this._fullscreenElement;return le(e,this._savedStyles),document.body&&(document.body.style.overflow=this._bodyOverflow),document.documentElement&&(document.documentElement.style.overflow=this._htmlOverflow),this._fullscreenElement=null,this._savedStyles={},ue(e,"fullscreenchange"),!0}},{key:"addEventListener",value:function(e,t,n){var o=2<arguments.length&&void 0!==n?n:document;return this.on(e,t,o)}},{key:"on",value:function(e,t,n){var o=2<arguments.length&&void 0!==n?n:document;this._handleEvent(o,"addEventListener",e,t)}},{key:"removeEventListene",value:function(e,t,n){var o=2<arguments.length&&void 0!==n?n:document;return this.off(e,t,o)}},{key:"off",value:function(e,t,n){var o=2<arguments.length&&void 0!==n?n:document;this._handleEvent(o,"removeEventListener",e,t)}},{key:"_handleEvent",value:function(t,n,e,o){("fullscreenchange"===e?M:"fullscreenerror"===e?N:[e]).forEach(function(e){t[n](e,o)})}},{key:"useStyleFirst",get:function(){return se},set:function(e){(e=!!e)!==se&&(se=e,ue(document,"esfullscreenmethodchange"))}},{key:"fullscreenElement",get:function(){return["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].reduce(function(e,t){return e||document[t]},null)||this._fullscreenElement}},{key:"isFullscreen",get:function(){return _(this.fullscreenElement)}}]),e}());e.default=fe,e.esFullscreen=fe,Object.defineProperty(e,"__esModule",{value:!0})});
