!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.esFullscreen=t()}(this,function(){"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=["","o","ms","moz","webkit","webkitCurrent"],f=[["",""],["exit","cancel"],["screen","Screen"]],l={bottom:0,height:"100%",left:0,overflow:"hidden",position:"fixed",right:0,top:0,width:"100%",zIndex:"2147483647"},i=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],u=["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"],e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=t(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=o=function(e){return n(e)}:t.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},o(e)}t.exports=o}),a="object"==typeof e&&e&&e.Object===Object&&e,o="object"==typeof self&&self&&self.Object===Object&&self,y=(a||o||Function("return this")()).Symbol,d=Object.prototype,v=d.hasOwnProperty,b=d.toString,m=y?y.toStringTag:void 0;var p=function(e){var t=v.call(e,m),n=e[m];try{e[m]=void 0}catch(e){}var o=b.call(e);return t?e[m]=n:delete e[m],o},h=Object.prototype.toString;var E=function(e){return h.call(e)},g=y?y.toStringTag:void 0;var S=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":g&&g in Object(e)?p(e):E(e)},j=t(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n&&a.process,l=function(){try{var e=o&&o.require&&o.require("util").types;return e||r&&r.binding&&r.binding("util")}catch(e){}}();e.exports=l});j&&j.isRegExp,Function.prototype.toString.call(Object);var w=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var O=function(e){if(!w(e))return!1;var t=S(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};j&&j.isDate;var F=function(e){return void 0===e};function k(e){return!F(e)}function x(e){return!!("object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?e instanceof HTMLElement:e&&"object"===n(e)&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)}var _="object"==typeof e&&e&&e.Object===Object&&e,T="object"==typeof self&&self&&self.Object===Object&&self,L=(_||T||Function("return this")()).Symbol,M=Object.prototype,N=M.hasOwnProperty,P=M.toString,U=L?L.toStringTag:void 0;var z=function(e){var t=N.call(e,U),n=e[U];try{e[U]=void 0}catch(e){}var o=P.call(e);return t?e[U]=n:delete e[U],o},H=Object.prototype.toString;var K=function(e){return H.call(e)},q=L?L.toStringTag:void 0;var A=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":q&&q in Object(e)?z(e):K(e)},C=Array.isArray;var D=function(e){return null!=e&&"object"==typeof e};var G=function(e){return"string"==typeof e||!C(e)&&D(e)&&"[object String]"==A(e)};var I=function(t,n){return function(e){return t(n(e))}}(Object.getPrototypeOf,Object),R=Function.prototype,V=Object.prototype,W=R.toString,Y=V.hasOwnProperty,B=W.call(Object);var J=function(e){if(!D(e)||"[object Object]"!=A(e))return!1;var t=I(e);if(null===t)return!0;var n=Y.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&W.call(n)==B},Q="undefined"!=typeof document;function X(e,t,n){if(G(t))e.style[t]=n;else for(var o in t)X(e,o,t[o])}function Z(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t&&!G(t)&&(n=t),G(e)&&(t=e);var o=n.keyOnly,r=void 0!==o&&o;if(!Q)return r?"":void 0;if(x(e)||(e=document),!G(t))throw new Error("You must pass in a string as name, but not ".concat(c(t),"."));for(var l=0;l<f.length;l++){t=t.replace(f[l][0],f[l][1]);for(var i=0;i<s.length;i++){var u=0===i?t:s[i]+t.charAt(0).toUpperCase()+t.substr(1);if(void 0!==e[u])return r?u:e[u]}}return r?"":void 0}function $(e,t){var n,o,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},l=r.bubbles,i=void 0===l||l,u=r.cancelable,c=void 0===u||u;if(O(Event)?n=new Event(t,{bubbles:i,cancelable:c}):Q&&document.createEvent?(n=document.createEvent("HTMLEvents")).initEvent(t,!0,!0):Q&&document.createEventObject&&((n=document.createEventObject()).eventType=t,n.eventName=t),!(J(n)||((o=n)instanceof Event||(o&&o.originalEvent)instanceof Event)))throw new Error("We can't create an object on this browser, please report to author");e.dispatchEvent?e.dispatchEvent(n):e.fireEvent?e.fireEvent("on"+n.eventType,n):e[t]?e[t]():e["on"+t]&&e["on"+t]()}var ee=Z("fullscreenEnabled"),te=!1;return new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fullscreenElement=null,this.isNativelySupport=k(Z("fullscreenElement"))&&(!k(ee)||!0===ee),this._openKey=Q?Z(document.body||document.documentElement,"requestFullscreen",{keyOnly:!0}):"",this._exitKey=Z("exitFullscreen",{keyOnly:!0}),this._useStyleFirst=!1,this.hasUsedStyle=!1}var t,n,o;return t=e,(n=[{key:"requestFullscreen",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{force:!1};return this.open(e,t)}},{key:"open",value:function(n){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).force,t=void 0!==e&&e,o=this.fullscreenElement;if(o&&o!==n){if(!t)return $(document,"fullscreenerror"),!1;this.exit()}if(!this.useStyleFirst){if(this.isNativelySupport)return O(n[this._openKey])&&n[this._openKey](),!0;if(n instanceof HTMLVideoElement&&n.webkitSupportsFullscreen&&O(n.webkitEnterFullscreen))return n.webkitEnterFullscreen(),this._fullscreenElement=n,!0}return this._savedStyles=Object.keys(l).reduce(function(e,t){return e[t]=n.style[t],e},{}),X(n,l),document.body&&(this._bodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden"),document.documentElement&&(this._htmlOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden"),this._fullscreenElement=n,this.hasUsedStyle=!0,$(n,"fullscreenchange"),!0}},{key:"exitFullscreen",value:function(){return this.exit()}},{key:"exit",value:function(){if(!this.isFullscreen)return!1;if(this.isNativelySupport&&!this.useStyleFirst&&!this.hasUsedStyle)return document[this._exitKey](),!0;var e=this._fullscreenElement;return X(e,this._savedStyles),document.body&&(document.body.style.overflow=this._bodyOverflow),document.documentElement&&(document.documentElement.style.overflow=this._htmlOverflow),this._fullscreenElement=null,this._savedStyles={},$(e,"fullscreenchange"),!0}},{key:"addEventListener",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document;return this.on(e,t,n)}},{key:"on",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document;this._handleEvent(n,"addEventListener",e,t)}},{key:"removeEventListene",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document;return this.off(e,t,n)}},{key:"off",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document;this._handleEvent(n,"removeEventListener",e,t)}},{key:"_handleEvent",value:function(t,n,e,o){("fullscreenchange"===e?i:"fullscreenerror"===e?u:[e]).forEach(function(e){t[n](e,o)})}},{key:"useStyleFirst",get:function(){return te},set:function(e){(e=!!e)!==te&&(te=e,$(document,"esfullscreenmethodchange"))}},{key:"fullscreenElement",get:function(){return["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].reduce(function(e,t){return e||document[t]},null)||this._fullscreenElement}},{key:"isFullscreen",get:function(){return x(this.fullscreenElement)}}])&&r(t.prototype,n),o&&r(t,o),e}())});
